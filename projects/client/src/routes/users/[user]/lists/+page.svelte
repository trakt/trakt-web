<script lang="ts">
  import { useDiscover } from "$lib/features/discover/useDiscover";
  import * as m from "$lib/features/i18n/messages.ts";
  import RenderFor from "$lib/guards/RenderFor.svelte";

  import TraktPage from "$lib/sections/layout/TraktPage.svelte";
  import TraktPageCoverSetter from "$lib/sections/layout/TraktPageCoverSetter.svelte";
  import SmartListRenderer from "$lib/sections/lists/smart/SmartListRenderer.svelte";
  import PersonalLists from "$lib/sections/lists/user/PersonalLists.svelte";
  import WatchList from "$lib/sections/lists/watchlist/WatchList.svelte";
  import { DEFAULT_SHARE_COVER } from "$lib/utils/constants";

  const { mode } = useDiscover();
  // TODO use feature flag
</script>

<TraktPage
  audience="authenticated"
  image={DEFAULT_SHARE_COVER}
  title={m.page_title_lists()}
>
  <TraktPageCoverSetter />

  <WatchList
    drilldownLabel={m.button_label_view_all_watchlist_items()}
    status="discover"
    type={$mode}
  />

  <PersonalLists slug="me" type="personal" />
  <PersonalLists slug="me" type="liked" />
  <PersonalLists slug="me" type="collaboration" />

  <RenderFor audience="director">
    <SmartListRenderer type="movie" />
    <SmartListRenderer type="show" />
  </RenderFor>
</TraktPage>
